<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Demo</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		crossorigin="anonymous">
	</script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/0.7.4/tailwind.min.css">
    <link rel="stylesheet" href="assets/css/main.css">
   
</head>
  <body  class="text-pink-darkest bg-teal-lightest relative font-sans">
  
    <div class="h-full w-full  flex justify-center flex-col ">
        <div class="relative">
            <span id="off-chain-amount"  class="block px-8 pt-8 text-center tracking-wide text-xs">
                    CREDIT — 15 AE
            </span>
            <a href="#" class="no-underline text-pink-darkest text-2xl absolute pin-r pin-t py-6 px-8">
                    ⁞
            </a>
        </div>
        <div class="flex-1 ">
            
        </div>
        <div class="bg-pink-darkest  ">
            <a href="#" class="no-underline text-teal-lightest block p-8 text-center tracking-wide text-xs">
                    ORDER A FREE COFFEE!
            </a>

        </div>

    </div>

    <div class="absolute pin flex justify-center">
        <div class="m-6 w-full bg-white shadow-lg flex justify-center flex-col">
                    <div class="relative flex ">
                        <a href="#" class="no-underline text-pink-darkest block flex-1 px-8 pt-8 text-center tracking-wide text-xs border-b-2 border-pink-darkest font-bold">
                                CREDIT
                        </a>
                        <a id="btn-history" href="#" class="change-frame no-underline text-pink-darkest-50 block flex-1 px-8 pt-8 text-center tracking-wide text-xs border-b border-pink-darkest-25 ">
                                HISTORY
                        </a>
                        <a href="#" id="btn-buy" class="change-frame no-underline text-white bg-pink-darkest text-2xl  py-6 px-6">
                                ✗
                        </a>
                    </div>
                    <div class="flex-1 flex flex-col justify-end">
                            <div class="flex-1 flex flex-col justify-center text-center ">
                                <div>
                                    <span id="credit-off-chain-amount" class="font-serif  text-6xl font-normal leading-none"></span>
                                    <span class="text-xs font-sans tracking-wide"> AE</span>
                                </div>
                            </div>

                            <a href="#" data-credit="1" class="btns-credit mx-5 no-underline text-pink-darkest block py-8 text-center tracking-wide text-xs border-t border-pink-darkest-25">
                                    DEPOSIT — 1 AE
                            </a>
                            <a href="#" data-credit="2" class="btns-credit mx-5 no-underline text-pink-darkest block py-8 text-center tracking-wide text-xs border-t border-pink-darkest-25">
                                    DEPOSIT — 2 AE
                            </a>
                            <a href="#" data-credit="5" class="btns-credit mx-5 no-underline text-pink-darkest block py-8 text-center tracking-wide text-xs border-t border-pink-darkest-25">
                                    DEPOSIT — 5 AE
                            </a>
                            <a id="btn-credit--close-channel" href="#" class="mx-5 no-underline text-pink-darkest block py-8 text-center tracking-wide text-xs border-t border-pink-darkest-25">
                                    CLOSE CHANNEL
                            </a>
                    </div>

        </div>

    </div>

    <script>
    
        window.addEventListener('load', async function() {

			window.parent.isChannelOpen();

			async function updateOffChainBalance () {
				let balance = await window.parent.getOffChainBalance();
				let toAe = balance / window.parent.ONE_AE;
				$('#credit-off-chain-amount').text(` ${toAe}`);
			}

        	$('.change-frame').click(window.parent.changeFrame);
        	$('#btn-credit--close-channel').click(window.parent.closeChannel);
			$('.btns-credit').click(window.parent.credit);

			updateOffChainBalance();
        });

    </script>
  
</body>
</html>